<?php get_header(); ?>

<style>
    .category_page__banner {
        background-image: url("<?php echo get_template_directory_uri();?>/images/page_contacts/banner_photo.jpg");
    }
</style>

<section class="page_banner category_page__banner">
    <div class="container">
        <h2>
            <?php 
                single_term_title();
            ?>
        </h2>
    </div>
    <div class="home_banner__line">
        <div class="banner_line red"></div>
        <div class="banner_line blue"></div>
        <div class="banner_line green"></div>
        <div class="banner_line yellow"></div>
    </div>
</section>

<section class="category_page">
    <div class="container">
        <div class="event_breadcrumbs">
            <?php the_breadcrumb(); ?>
        </div>

        <div class="category_page__posts">
            <?php
                $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
                $args = array(
                    'post_type' => 'post',
                    'category_name' => 'news',
                    'paged'	         => $paged
                );
                $catalog = new WP_Query( $args );
            

                if ( $catalog->have_posts() ) :
                    while ( $catalog->have_posts() ) : $catalog->the_post(); 
                        $post_id = get_the_ID();
            ?>

            <div class="category_page__post">
                <div class="category_post__img">
                    <?php the_post_thumbnail();?>
                </div>
                <div class="category_post__descrption">
                    <div class="post_date"><svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M26.1083 9.75475V6.07708V5.67424C26.1083 3.56681 24.2483 1.84991 21.9373 1.7906V1.79109V2.72409V2.72497V3.66295V3.66481V4.1977C21.9373 5.56549 20.8246 6.67817 19.4571 6.67817C18.0895 6.67817 16.9768 5.56549 16.9768 4.1977V3.6523V2.71842V1.78455H9.94391V2.71842V3.6523V4.1977C9.94391 5.56549 8.83123 6.67817 7.46353 6.67817C6.09593 6.67817 4.98335 5.56549 4.98335 4.1977V3.67282V3.6696V2.72859V2.72771V1.79481V1.79383C2.7105 1.89007 0.892578 3.59124 0.892578 5.67375V6.07659V9.75426V22.7075C0.892578 25.0738 2.81827 26.9999 5.18472 26.9999H21.8159C24.1821 26.9999 26.1079 25.0738 26.1079 22.7075V9.75475H26.1083ZM24.2404 22.708C24.2404 24.045 23.1528 25.1322 21.8159 25.1322H5.18521C3.84839 25.1322 2.76092 24.045 2.76092 22.708V9.75475H24.2404V22.708Z"
                                fill="#168CF8" />
                            <path d="M6.38477 1.07956V1.78451V2.71839V3.65227V4.19766C6.38477 4.79406 6.86792 5.27722 7.46432 5.27722C8.06053 5.27722 8.54388 4.79406 8.54388 4.19766V3.65227V2.71839V1.78451V1.07956C8.54398 0.483158 8.06063 0 7.46442 0C6.86792 0.000488532 6.38477 0.483647 6.38477 1.07956Z"
                                fill="#168CF8" />
                            <path d="M19.4577 0.000488281C18.8613 0.000488281 18.3779 0.483647 18.3779 1.08005V1.785V2.71888V3.65275V4.19815C18.3779 4.79455 18.8612 5.27771 19.4577 5.27771C20.0542 5.27771 20.5375 4.79455 20.5375 4.19815V3.65227V2.71839V1.78451V1.07956C20.5367 0.483647 20.0538 0.000488281 19.4577 0.000488281Z"
                                fill="#168CF8" />
                            <path d="M10.3757 22.6552C11.5934 22.6552 12.513 22.3151 13.1347 21.6347C13.7554 20.9544 14.0664 20.1655 14.0664 19.2681C14.0664 18.4144 13.8007 17.7413 13.2688 17.2489C13.1245 17.1166 12.9938 17.0107 12.8771 16.9324C12.6633 16.7883 12.6473 16.6853 12.8486 16.5293C12.9616 16.4413 13.0727 16.3351 13.1814 16.21C13.5521 15.7809 13.7375 15.2543 13.7375 14.6295C13.7375 13.7476 13.4277 13.0438 12.8062 12.5194C12.1846 11.995 11.3674 11.733 10.3542 11.733C9.80881 11.733 9.34822 11.7989 8.97293 11.9305C8.59784 12.0623 8.27433 12.2521 8.00124 12.5012C7.63592 12.8524 7.3681 13.2352 7.19712 13.6501C7.08475 13.9812 7.00669 14.3264 6.9636 14.6843C6.93282 14.9405 7.13644 15.1494 7.39409 15.1494H8.40594C8.66389 15.1494 8.86262 14.9388 8.90004 14.6834C8.94548 14.3733 9.04709 14.1115 9.2045 13.8986C9.43567 13.5867 9.79709 13.4303 10.2884 13.4303C10.7166 13.4303 11.048 13.557 11.2843 13.8107C11.5196 14.0642 11.6379 14.3934 11.6379 14.7983C11.6379 15.4231 11.4067 15.8376 10.9452 16.0423C10.7446 16.1334 10.4284 16.1931 9.99787 16.2219C9.74071 16.2383 9.53142 16.4489 9.53142 16.7062V17.2648C9.53142 17.5224 9.7412 17.7295 9.99885 17.7435C10.455 17.7678 10.8053 17.8293 11.0486 17.9291C11.6127 18.1635 11.8947 18.6295 11.8947 19.3263C11.8947 19.8535 11.7424 20.2566 11.4386 20.5375C11.1347 20.8179 10.7778 20.9579 10.3693 20.9579C9.7026 20.9579 9.2425 20.7021 8.98983 20.19C8.90727 20.0209 8.84982 19.8253 8.81719 19.6027C8.77977 19.3473 8.57664 19.1365 8.3183 19.1365H7.20376C6.94591 19.1365 6.74278 19.3454 6.77122 19.6017C6.84098 20.2347 7.00014 20.7623 7.24792 21.184C7.83211 22.165 8.87503 22.6552 10.3757 22.6552Z"
                                fill="#168CF8" />
                            <path d="M16.179 15.0764H17.7399C17.9976 15.0764 18.2067 15.2853 18.2067 15.5434V21.9248C18.2067 22.1824 18.4161 22.3917 18.6737 22.3917H19.8763C20.1339 22.3917 20.3431 22.1823 20.3431 21.9248V12.2514C20.3431 11.9937 20.1338 11.7844 19.8763 11.7844H19.0686C18.811 11.7844 18.5985 11.8815 18.5738 11.9982C18.5606 12.0598 18.5433 12.13 18.521 12.2084C18.4289 12.5253 18.292 12.7789 18.1124 12.969C17.8497 13.2467 17.509 13.432 17.0909 13.5251C16.8958 13.5688 16.5912 13.604 16.178 13.6318C15.9208 13.6482 15.7119 13.8662 15.7119 14.1233V14.6085C15.7119 14.8672 15.9217 15.0764 16.179 15.0764Z"
                                fill="#168CF8" />
                        </svg>
                        <p>
                            <?php echo get_the_date("d/m/Y"); ?>
                        </p>
                    </div>
                    <div class="post_title">
                        <h3><a href="<?php the_permalink(); ?>"><?php the_title();?></a></h3>
                    </div>
                    <div class="post_blackquote">
                        <p><?php the_field("small_description", $post_id);?></p>
                    </div>
                    <div class="post_btn_more"><a href="<?php the_permalink(); ?>">читати більше</a></div>
                </div>
            </div>

            <?php endwhile;
            endif; 
            
            ?>
        
        </div>

    </div>
</section>

<!-- Pagination -->
<div class="page_nav_category">
    <div class="container">
        <?php
    if (  $catalog->max_num_pages > 1 ){
    $GLOBALS['wp_query']->max_num_pages = $catalog->max_num_pages;
    if(!get_previous_posts_link()) {
        echo '<div class="prev_pagination"><svg width="49" height="16" viewBox="0 0 49 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.292892 7.2929C-0.0976296 7.68342 -0.0976295 8.31659 0.292893 8.70711L6.65685 15.0711C7.04738 15.4616 7.68054 15.4616 8.07107 15.0711C8.46159 14.6805 8.46159 14.0474 8.07107 13.6569L2.41422 8L8.07107 2.34315C8.46159 1.95263 8.46159 1.31946 8.07107 0.928936C7.68054 0.538411 7.04738 0.538411 6.65685 0.928936L0.292892 7.2929ZM49 7L1 7L1 9L49 9L49 7Z" fill="#168CF8"/></svg></div>' ;
        } else {
        previous_posts_link('<div class="prev_pagination"><svg width="49" height="16" viewBox="0 0 49 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.292892 7.2929C-0.0976296 7.68342 -0.0976295 8.31659 0.292893 8.70711L6.65685 15.0711C7.04738 15.4616 7.68054 15.4616 8.07107 15.0711C8.46159 14.6805 8.46159 14.0474 8.07107 13.6569L2.41422 8L8.07107 2.34315C8.46159 1.95263 8.46159 1.31946 8.07107 0.928936C7.68054 0.538411 7.04738 0.538411 6.65685 0.928936L0.292892 7.2929ZM49 7L1 7L1 9L49 9L49 7Z" fill="#168CF8"/></svg></div>');
        }
	the_posts_pagination(array(
		'type'=>'inline',
        'screen_reader_text' => __( ' ' ),
 		'end_size'     => 1,
        'mid_size'     => 1,
        'prev_text' => ' ',
        'next_text' => ' ',
		'add_args'     => false
    ));
    if(!get_next_posts_link()) {
        echo '<div class="next_pagination"><svg width="49" height="16" viewBox="0 0 49 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M48.7071 7.2929C49.0976 7.68342 49.0976 8.31659 48.7071 8.70711L42.3431 15.0711C41.9526 15.4616 41.3195 15.4616 40.9289 15.0711C40.5384 14.6805 40.5384 14.0474 40.9289 13.6569L46.5858 8L40.9289 2.34315C40.5384 1.95263 40.5384 1.31946 40.9289 0.928936C41.3195 0.538411 41.9526 0.538411 42.3431 0.928936L48.7071 7.2929ZM8.74228e-08 7L48 7L48 9L-8.74228e-08 9L8.74228e-08 7Z" fill="#168CF8"/></svg></div>';
        } else {
        next_posts_link('<div class="next_pagination"><svg width="49" height="16" viewBox="0 0 49 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M48.7071 7.2929C49.0976 7.68342 49.0976 8.31659 48.7071 8.70711L42.3431 15.0711C41.9526 15.4616 41.3195 15.4616 40.9289 15.0711C40.5384 14.6805 40.5384 14.0474 40.9289 13.6569L46.5858 8L40.9289 2.34315C40.5384 1.95263 40.5384 1.31946 40.9289 0.928936C41.3195 0.538411 41.9526 0.538411 42.3431 0.928936L48.7071 7.2929ZM8.74228e-08 7L48 7L48 9L-8.74228e-08 9L8.74228e-08 7Z" fill="#168CF8"/></svg></div>');
        }
    }
    ?>
    </div>
</div>
<?php  wp_reset_postdata(); ?>
<!-- End Pagination -->


<!-- ajax load posts -->
    <?php if (  $catalog->max_num_pages > 1 ) : ?>
        <script>
        var ajaxurl = '<?php echo site_url() ?>/wp-admin/admin-ajax.php';
        var true_posts = '<?php echo serialize($catalog->query_vars); ?>';
        var current_page = <?php echo (get_query_var('paged')) ? get_query_var('paged') : 1; ?>;
        var max_pages = '<?php echo $catalog->max_num_pages; ?>';
        </script>
        <div class="show_more_events hide_posts_page">Показати більше</div>
    <?php endif; ?>
<!-- end ajax load posts -->

<?php get_footer();?>